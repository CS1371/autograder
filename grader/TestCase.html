
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>TestCase: A single test for a homework submission</title><meta name="generator" content="MATLAB 9.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script><script>
      $(document).ready(function() {
        // get name of class
        // anywhere CLASS name is or METHOD name is, replace with code version
        // class name will be in only h1
        // methods will be underneath ul that says Methods as text (I know, hacky...)
        var cName = $('h1').text();
        cName = cName.split(':');
        cName = cName[0];
        var strNewString = $('body').html().replace(new RegExp('\\s+' + cName + '\\s+', "g"),'&nbsp;<code>Student</code>&nbsp;');
        $('body').html(strNewString);

        // for each occurrence of this in 
      });
    </script><meta name="DC.date" content="2018-09-13"><meta name="DC.source" content="TestCase.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
code { font-size: 1.2em; before: " " }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="container-fluid"><div class="content"><h1>TestCase: A single test for a homework submission</h1><!--introduction--><p>This class defines a complete test case for a specific problem</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Fields</a></li><li><a href="#2">Methods</a></li><li><a href="#3">Remarks</a></li><li><a href="#4">Constructor</a></li><li><a href="#5">Remarks</a></li><li><a href="#6">Exceptions</a></li><li><a href="#7">Unit Tests</a></li></ul></div><h2 id="1">Fields</h2><div><ul><li><code>call</code>: The complete function call (i.e., <code>[out1, out2] = myFunction(in1, in2);</code>)</li></ul></div><div><ul><li><code>initializer</code>: The complete function call for a function to be run immediately before testing the student's code</li></ul></div><div><ul><li><code>points</code>: The points possible for this specific test case</li></ul></div><div><ul><li><code>path</code>: The fully qualified path to the solution code directory</li></ul></div><div><ul><li><code>supportingFiles</code>: A string array of complete file paths that will need to be copied to the student's directory</li></ul></div><div><ul><li><code>loadFiles</code>: A string array of complete file paths of MAT files to load</li></ul></div><div><ul><li><code>inputs</code>: A cell array of input name-value pairs. Loaded at runtime.</li></ul></div><div><ul><li><code>banned</code>: A string array of names of banned functions for this problem</li></ul></div><div><ul><li><code>outputs</code>: A structure where the field name is the name of the output, and the field value is the value of the output</li></ul></div><div><ul><li><code>files</code>: A <code>File</code> array that represents all the files produced as outputs</li></ul></div><div><ul><li><code>plots</code>: A <code>Plot</code> array that represents the plots generated</li></ul></div><h2 id="2">Methods</h2><div><ul><li><code>TestCase(struct info, string path)</code></li></ul></div><h2 id="3">Remarks</h2><p>The <code>TestCase</code> class defines all the necessary settings and conditions to run a single test of a student's function. The <code>TestCase</code> class stores the instructions for running the test case, and includes the solution's outputs for comparison.</p><p>The input arguments referenced in <code>call</code> should either be defined in <code>loadFiles</code> (the MAT files to be loaded), or in the <code>initializer</code>:</p><p>The <code>initializer</code> is useful if a variable's value cannot be determined until right before the function call. If <code>initializer</code> has outputs that will be used as inputs when calling the student's function, the names of the outputs must match the expected input names in <code>call</code> exactly. Such inputs that are generated at runtime don't need to appear in the MAT files, and should be overwritten if they do exist.</p><p>For example, suppose you wanted to populate input <code>fid</code> with a file handle. In that case, your <code>initializer</code> would look like:</p><pre class="language-matlab">[fid] = fopen(<span class="string">'myInput.txt'</span>);
</pre><p>Now suppose <code>fid</code> is now 3. This will pass in 3 as an input to the function.</p><p>The initializer function can also be used to load a MAT-file, from the <code>supportingFiles</code> that are copied into the student's directory. Again, the variable names inside the MAT-file should match the input names in <code>call</code>.</p><h2 id="4">Constructor</h2><p>The <code>TestCase</code> constructor creates a new <code>TestCase</code> from a structure representing parsed JSON.</p><p>T = TestCase(INFO, PATH) will create a new <code>TestCase</code> with all the fields filled with values from the solution. INFO should be a structure with the fields <code>call</code>, <code>initializer</code>, <code>points</code>, <code>supportingFiles</code>, <code>banned</code>. PATH is a fully qualified path to the solution code directory.</p><h2 id="5">Remarks</h2><p>The format that the structure <code>INFO</code> should follow is shown by the JSON example below:</p><pre class="language-matlab">{
    <span class="string">"call"</span>: <span class="string">"[out1, out2] = myFun(in1, in2);"</span>,
    <span class="string">"initializer"</span>: <span class="string">""</span>,
    <span class="string">"points"</span>: 3,
    <span class="string">"supportingFiles"</span>: [
        <span class="string">"myFile.txt"</span>,
        <span class="string">"myInputImage.png"</span>,
        <span class="string">"myTestCases.mat"</span>
    ],
    <span class="string">"banned"</span>: [
        <span class="string">"fopen"</span>,
        <span class="string">"fclose"</span>,
        <span class="string">"fseek"</span>,
        <span class="string">"frewind"</span>
    ]
}
</pre><p>Note that white space does <i>not</i> matter in the input JSON.</p><p>The <code>initializer</code> is a special function call. <code>initializer</code> specifies a function that is designed to run <i>the moment before</i> the main test case is run. This is useful for defining an input that can't be known until runtime. For example, suppose you wanted an open file handle as an input. This could not be done at compile time, since many files may be open when the test case is run. There are some restrictions on <code>initializer</code>, however:</p><div><ul><li>It must be a <i>valid function call</i>. It cannot be just proper MATLAB code - only a single function call is allowed</li></ul></div><div><ul><li>It's outputs must be named <i>exactly the same</i> as any inputs to the function.</li></ul></div><div><ul><li>It can reference any valid function, but variable <i>inputs</i> to the <code>initializer</code> are not allowed.</li></ul></div><p>See above for an example of how to use the initializer. If the initializer is not found, or is left blank, then it is assumed that no initialization is required.</p><p>As for the variables in the MAT files, it's values <i>must</i> be literals. You cannot use arbitrary MATLAB code as the value. To execute arbitrary MATLAB code, see the remarks for the <code>initializer</code>.</p><p>The caller does <i>not</i> need to worry about "cleaning up" any open resources (such as files or figures). Since the autograder will already handle closing these resources, cleanup is the responsibility of <code>TestCase</code>, not the writer of the JSON.</p><p>Additionally, the name of the supporting function can be anything. But best practice is for it to be named something "guaranteed" to be unique; as such, suffixing the initializer function name with '__' is usually a good idea.</p><h2 id="6">Exceptions</h2><p>The constructor throws the <code>AUTOGRADER:TestCase:ctor:badInfo</code> if there are problems with the INFO structure. This exception should not be consumed, because this means the <code>TestCase</code> is incomplete.</p><h2 id="7">Unit Tests</h2><p>Assume INFO struct that passes inspection.</p><pre class="language-matlab">J = <span class="string">'...'</span> <span class="comment">% Valid INFO;</span>
P = <span class="string">'...'</span> <span class="comment">% Valid path;</span>
T = TestCase(J, P);
</pre><pre class="language-matlab">T <span class="string">isa</span> <span class="string">|TestCase|</span>
T.call -&gt; <span class="string">"[out1, out2] = myFun(in1, in2);"</span>
T.initializer -&gt; [];
T.points -&gt; 3;
T.supportingFiles -&gt; [<span class="string">"myFile.txt"</span>, <span class="string">"myInputImage.png"</span>];
T.loadFiles -&gt; [<span class="string">"myTestCases.mat"</span>];
T.banned -&gt; [<span class="string">"fopen"</span>, <span class="string">"fclose"</span>, <span class="string">"fseek"</span>, <span class="string">"frewind"</span>];
T.path -&gt; <span class="string">'...'</span> <span class="comment">% Valid path</span>
</pre><p>Note that the following would be filled <i>after</i> running the solution. This is still done in the constructor. For this example, assume the function created one image file and one text file. For the purposes of documenting <code>TestCase</code>, we will not explore the contents of those files - that will be covered in <code>File</code>.</p><pre class="language-matlab">T.outputs -&gt; struct(<span class="string">'out1'</span>, 2, <span class="string">'out2'</span>, <span class="string">'Hello, World!'</span>);
T.files -&gt; File[2]
</pre><p>Now suppose the structure in <code>J</code> is such that the <code>initializer</code> is set to the string 'supportFunction____()';</p><p>Note the <code>initializer</code> is set. Suppose the following is found in "supportFunction__.m":</p><pre class="language-matlab"><span class="keyword">function</span> out = supportFunction__()
    out = fopen(<span class="string">'myFile.txt'</span>, <span class="string">'r'</span>);
<span class="keyword">end</span>
</pre><p>Now we call the function:</p><pre class="language-matlab">T = TestCase(J, P);
</pre><pre class="language-matlab">T <span class="string">isa</span> <span class="string">|TestCase|</span>
T.call -&gt; <span class="string">"[out1, out2] = myFun(in1, in2);"</span>
T.initializer -&gt; <span class="string">"[in1] = supportFunction__();"</span>;
T.points -&gt; 3;
T.supportingFiles -&gt; [<span class="string">"myFile.txt"</span>, <span class="string">"myInputImage.png"</span>, <span class="string">"supportFunction__.m"</span>];
T.loadFiles -&gt; [<span class="string">"myTestCases.mat"</span>];
T.banned -&gt; [<span class="string">"fopen"</span>, <span class="string">"fclose"</span>, <span class="string">"fseek"</span>, <span class="string">"frewind"</span>];
T.path -&gt; <span class="string">'...'</span> <span class="comment">% Valid path</span>
</pre><p>The following are filled in after everything is run. Note that for this case, the in2 is calculated <i>immediately</i> before the function is run.</p><pre class="language-matlab">T.outputs -&gt; struct(<span class="string">'out1'</span>, 1, <span class="string">'out2'</span>, false);
T.files -&gt; File[2];
T.plots -&gt; Plot[1];
</pre><p>Assume J structure is empty or has missing fields:   T = TestCase(J, P);</p><pre class="language-matlab">The <span class="string">constructor</span> <span class="string">threw</span> <span class="string">exception</span>
AUTOGRADER:TestCase:ctor:badInfo
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018a</a><br></p></div></div></body></html>